# 打印床调平

打印床调平（有时也被称为 "bed tramming"）对于获得高质量的打印结果至关重要。错误"调平"的打印床会造成附着力差、"翘曲"，以及整个打印过程中的细微问题。本文档是在 Klipper 中进行调平的指南。

了解打印床调平的目标很重要。如果打印机在打印过程中被命令到`X0 Y0 Z10`的位置，那么目标是让打印机的喷嘴距离打印床正好10毫米。此外，如果打印机被命令到`X50 Z10`的位置，目标是在整个水平移动过程中，喷嘴与床面始终保持10毫米的准确距离。

为了获得良好的打印质量，打印机应进行校准，使Z轴距离的精度在约25微米（0.025毫米）。这是一个很小的距离，远小于典型人类头发的宽度。这个尺度是不能 "用眼睛 "来测量的。微妙的影响（如热膨胀）会影响这个尺度的测量。获得高精度的秘诀是使用一个可重复，高精度，并能够利用打印机自身运动系统的调平方法。

## 选择适当的校准机制

不同类型的打印机使用不同的方法来进行调平，但是所有这些方法最终都取决于“纸张测试“（如下所述）。特定类型打印机的实际调平过程在其他文档中有所描述。

在运行任何校准工具前，一定要执行在 [配置检查文档](Config_checks.md) 中 描述的检查步骤。在打印床调平前有必要验证打印机的基本运动。

对于带有“自动 Z 探针”的打印机，请务必按照 [探针校准](Probe_Calibrate.md) 文档中的说明先校准探针。对于三角洲结构的打印机，请参阅 [三角洲校准](Delta_Calibrate.md) 文档。对于带有打印床调平螺丝和传统 Z 限位的打印机，请参阅 [手动调平](Manual_Level.md) 文档。

在校准过程中，可能需要将打印机的Z `position_min`设置为一个负数（例如，`position_min = -2`）。即使在校准程序中，打印机也会执行边界检查。设置一个负数允许打印机在打印床的标称位置以下移动，这可以帮助确定实际床面位置。

## “A4纸测试法”

床调平的核心校准机制是"塞纸测试"。它涉及在打印床和喷嘴之间放置一张普通打印纸，然后将喷嘴控制到不同的Z高度，直到在来回移动纸张时感觉到适量的阻力。

即使你的打印机带有自动Z探针，理解塞纸测试依然很重要。为了保证探针的效果，它经常会需要校准。探针的校准机制也依赖塞纸测试。

为了进行塞纸测试，先用剪刀剪下一小块长方形的纸条（例如，5x3厘米）。打印纸的厚度一般为100微米（0.100mm）左右。(纸条的确切宽度并不重要.）

纸张测试的第一步是检查打印机的喷嘴和打印床。确保喷嘴和打印床面上没有塑料（或其他杂物）。

**请仔细检查喷嘴和床面，确保没有残留塑料存在！**

如果总是在一种胶带或床面上打印，可以在该胶带或床面上直接进行塞纸测试。请注意，胶带本身有厚度，不同的胶带（或任何其他床面）将影响 Z 的测量。请确保用塞纸测试测量每一种使用的床面。

如果喷嘴上残留了塑料，需要先加热挤出头并用金属镊子把这些塑料去除。等到挤出机完全冷却到室温后，再继续进行纸张测试。当喷嘴正在冷却时，使用金属镊子去除任何可能漏出的塑料。

**只在喷嘴和打印床都处于室温的情况下进行塞纸测试！**

当喷嘴被加热时，其位置（相对于床面）会因热膨胀而发生变化。这种热膨胀通常在100微米左右，大约是一张典型的打印纸的厚度。热膨胀的确切程度并不关键，正如纸张的确切厚度并不关键一样。从假设二者相等开始（见下文确定二者宽度之差的方法）。

当目标是在加热时有一个一致的距离时，在室温下校准距离可能听起来很奇怪。然而，如果在喷嘴加热时进行校准，往往会有少量的熔融塑料渗入纸张，从而改变了摩擦力的大小。这会影响校准精度。在床或喷嘴热的时候进行校准也会大大增加烧伤风险。热膨胀量是稳定的，所以在校准过程中很容易被考虑到。

**使用自动化工具来确定精确的 Z 高度！**

Klipper 有几个辅助脚本（例如，MANUAL_PROBE、Z_ENDSTOP_CALIBRATE、PROBE_CALIBRATE 或 DELTA_CALIBRATE）。请参阅[上述章节](#choose-the-appropriate-calibration-mechanism)来选择它们。

在OctoPrint终端窗口中运行适当的命令。该脚本将在OctoPrint终端输出中提示用户互动。以下是一个例子：

```
Recv: // Starting manual Z probe. Use TESTZ to adjust position.
Recv: // Finish with ACCEPT or ABORT command.
Recv: // Z position: ?????? --> 5.000 <-- ??????
```

喷嘴的（按照打印机目前的定义的）当前高度显示在"--> <--"之间。右边的数字是刚刚大于当前高度的最后一次探测高度，左边的数字是小于当前高度的最后一次探测高度（如果没有尝试，则??????）。

将纸放在喷嘴和床面之间。折叠纸张的一角可以让它更容易被抓在手里。(来回移动纸张时，尽量不要下压床面。）

![paper-test](img/paper-test.jpg)

使用 TESTZ 命令将喷嘴向纸条靠近。例如：

```
TESTZ Z=-.1
```

TESTZ命令将相对喷嘴的当前位置移动指定距离。(因此，`Z=-.1` 命令喷嘴向床身靠近 0.1mm。）喷嘴停止移动后，来回推动纸张，检查喷嘴是否与纸张接触，并感受摩擦力的大小。继续发出 TESTZ 命令，直到塞纸测试时感觉到少量的摩擦。

如果发现摩擦力太大，那么可以用一个正的 Z 值将喷嘴向上移动，或者用`TESTZ Z=+`或`TESTZ Z=-`来二分上一次位置和当前位置-也就是移动到两个位置之间的一半位置。例如，如果从 TESTZ 命令后收到以下反馈：

```
Recv: // Z position: 0.130 --> 0.230 <-- 0.280
```

然后 `TESTZ Z=-` 会将喷嘴移动到 Z 坐标 0.180 （0.130 和 0.230之间）。这个功能可以快速的找到一致阻力的位置。也可以用 `Z=++` 和 `Z=--` 直接回到上一次测量位置。例如，在上面反馈后执行`TESTZ Z=--`命令会将 Z 坐标移动到 0.130。

感受到少量的摩擦后，运行 ACCEPT 命令：

```
ACCEPT
```

这将接受给定的 Z 高度，并继续使用给定的校准工具。

确切的阻力并不重要，就像热膨胀量和纸张的确切宽度并不重要一样。只需要每次测试时尽量达到相同的阻力就行了。

如果在测试过程中出了问题，可以使用 `ABORT` 命令来退出校准工具。

## 确定热膨胀

在成功进行打印床调平后，可以继续计算"热膨胀"、"纸张厚度"和"纸张测试时感受到的摩擦量"综合影响的精确值。

这种类型的计算通常是不需要的，因为大多数用户发现简单的"塞纸测试"提供了足够好的结果。

最简单的计算方法是打印一个四面都是直壁的测试物体。可以用在[docs/prints/square.stl](prints/square.stl)中找到的大型空心方形。在切片时，确保切片软件在第一层使用与所有后续层相同的层高和挤出宽度。使用较高的层高（层高应该是喷嘴直径的75%左右），不要使用裙边(skirt)或筏(raft)。

打印测试对象，等待其自然冷却，并将其从打印床上取下。检查该物体的最低层。(可以用手指或指甲沿底层边缘划一下。)如果发现底层沿着物体的四边略微凸起，则表明喷嘴离床面偏近。可以发出`SET_GCODE_OFFSET Z=+.010`命令来增加高度。在未来的打印中，可以用相同的方法检查这种性状，并根据需要作进一步调整。这种类型的调整通常是以 10 微米（0.010毫米）为单位。

如果首层一直比后续层窄，那么可以使用 SET_GCODE_OFFSET 命令进行负的 Z 调整。如果不确定，那么可以减少 Z 值，直到底层的印刷品出现一个小的凸起，然后再增加 Z 值直到它消失。

应用期望的Z 值调整的最简单方法是创建一个 START_PRINT G代码宏，配置切片软件在打印开始代码中调用该宏，并为该宏添加 SET_GCODE_OFFSET 命令。详情见[切片软件](Slicers.md)文档。
